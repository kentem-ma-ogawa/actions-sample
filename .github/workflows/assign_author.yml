name: Auto Assign Author

on:
  pull_request:
    types: [opened, reopened]
  
jobs:
  assign-author:
     runs-on: ubuntu-slim
     timeout-minutes: 1  
     permissions:
       pull-requests: write
     # botでない、かつ、Assigneesが設定されていない場合のみ実行する
     if: ${{ !endsWith(github.actor, '[bot]') && toJSON(github.event.pull_request.assignees) == '[]' }}
     steps:
     - name: Assign Author to PR
       uses: actions/github-script@v7
       with:
         script: |
           const { owner, repo } = context.repo;
           const { number, user } = context.payload.pull_request;
           await github.rest.issues.addAssignees({
              owner: owner,
              repo: repo,
              issue_number: number,
              assignees: [user.login]
           });
